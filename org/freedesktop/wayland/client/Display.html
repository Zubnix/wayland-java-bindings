<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_20) on Wed Jan 21 22:09:21 CET 2015 -->
<title>Display (wayland-java-bindings 1.1.0-SNAPSHOT API)</title>
<meta name="date" content="2015-01-21">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Display (wayland-java-bindings 1.1.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../org/freedesktop/wayland/client/EventQueue.html" title="class in org.freedesktop.wayland.client"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/freedesktop/wayland/client/Display.html" target="_top">Frames</a></li>
<li><a href="Display.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.freedesktop.wayland.client</div>
<h2 title="Class Display" class="title">Class Display</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../../org/freedesktop/wayland/client/Proxy.html" title="class in org.freedesktop.wayland.client">org.freedesktop.wayland.client.Proxy</a>&lt;java.lang.Void&gt;</li>
<li>
<ul class="inheritance">
<li>org.freedesktop.wayland.client.Display</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../org/freedesktop/wayland/HasNative.html" title="interface in org.freedesktop.wayland">HasNative</a>, <a href="../../../../org/freedesktop/wayland/util/HasImplementation.html" title="interface in org.freedesktop.wayland.util">HasImplementation</a>, <a href="../../../../org/freedesktop/wayland/util/WaylandObject.html" title="interface in org.freedesktop.wayland.util">WaylandObject</a></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../org/freedesktop/wayland/client/WlDisplayProxy.html" title="class in org.freedesktop.wayland.client">WlDisplayProxy</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="typeNameLabel">Display</span>
extends <a href="../../../../org/freedesktop/wayland/client/Proxy.html" title="class in org.freedesktop.wayland.client">Proxy</a>&lt;java.lang.Void&gt;</pre>
<div class="block">Represents a connection to the compositor and acts as a proxy to
 the <code>Display</code> singleton object.
 <p/>
 A <code>Display</code> object represents a client connection to a Wayland
 compositor. It is created with either <code>WlDisplayProxy.connect()</code> or
 <code>WlDisplayProxy.connectToFd()</code>. A connection is terminated using
 <a href="../../../../org/freedesktop/wayland/client/Display.html#disconnect--"><code>disconnect()</code></a>.
 <p/>
 A <code>Display</code> is also used as the <a href="../../../../org/freedesktop/wayland/client/Proxy.html" title="class in org.freedesktop.wayland.client"><code>Proxy</code></a> for the <code>Display</code>
 singleton object on the compositor side.
 <p/>
 A <code>Display</code> object handles all the data sent from and to the
 compositor. When a <a href="../../../../org/freedesktop/wayland/client/Proxy.html" title="class in org.freedesktop.wayland.client"><code>Proxy</code></a> marshals a request, it will write its wire
 representation to the display's write buffer. The data is sent to the
 compositor when the client calls <a href="../../../../org/freedesktop/wayland/client/Display.html#flush--"><code>flush()</code></a>.
 <p/>
 Incoming data is handled in two steps: queueing and dispatching. In the
 queue step, the data coming from the display fd is interpreted and
 added to a queue. On the dispatch step, the handler for the incoming
 event set by the client on the corresponding <a href="../../../../org/freedesktop/wayland/client/Proxy.html" title="class in org.freedesktop.wayland.client"><code>Proxy</code></a> is called.
 <p/>
 A <code>Display</code> has at least one event queue, called the <em>main
 queue</em>. Clients can create additional event queues with \ref
 <a href="../../../../org/freedesktop/wayland/client/Display.html#createQueue--"><code>createQueue()</code></a> and assign <a href="../../../../org/freedesktop/wayland/client/Proxy.html" title="class in org.freedesktop.wayland.client"><code>Proxy</code></a>'s to it. Events
 occurring in a particular proxy are always queued in its assigned queue.
 A client can ensure that a certain assumption, such as holding a lock
 or running from a given thread, is true when a proxy event handler is
 called by assigning that proxy to an event queue and making sure that
 this queue is only dispatched when the assumption holds.
 <p/>
 The main queue is dispatched by calling <a href="../../../../org/freedesktop/wayland/client/Display.html#dispatch--"><code>dispatch()</code></a>.
 This will dispatch any events queued on the main queue and attempt
 to read from the display fd if its empty. Events read are then queued
 on the appropriate queues according to the proxy assignment. Calling
 that function makes the calling thread the <em>main thread</em>.
 <p/>
 A user created queue is dispatched with <a href="../../../../org/freedesktop/wayland/client/Display.html#dispatchQueue-org.freedesktop.wayland.client.EventQueue-"><code>dispatchQueue(EventQueue)</code></a>.
 If there are no events to dispatch this function will block. If this
 is called by the main thread, this will attempt to read data from the
 display fd and queue any events on the appropriate queues. If calling
 from any other thread, the function will block until the main thread
 queues an event on the queue being dispatched.
 <p/>
 A real world example of event queue usage is Mesa's implementation of
 <code>eglSwapBuffers()</code> for the Wayland platform. This function might need
 to block until a frame callback is received, but dispatching the main
 queue could cause an event handler on the client to start drawing
 again. This problem is solved using another event queue, so that only
 the events handled by the EGL code are dispatched during the block.
 <p/>
 This creates a problem where the main thread dispatches a non-main
 queue, reading all the data from the display fd. If the application
 would call <em> poll(2)</em> after that it would block, even though there
 might be events queued on the main queue. Those events should be
 dispatched with <a href="../../../../org/freedesktop/wayland/client/Display.html#dispatchPending--"><code>dispatchPending()</code></a> before
 flushing and blocking.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/freedesktop/wayland/client/Display.html#Display-com.sun.jna.Pointer-">Display</a></span>(com.sun.jna.Pointer&nbsp;wlDisplay)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/freedesktop/wayland/client/Display.html#cancelRead--">cancelRead</a></span>()</code>
<div class="block">Release exclusive access to display file descriptor
 <p/>
 This releases the exclusive access.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../../org/freedesktop/wayland/client/EventQueue.html" title="class in org.freedesktop.wayland.client">EventQueue</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/freedesktop/wayland/client/Display.html#createQueue--">createQueue</a></span>()</code>
<div class="block">Create a new event queue for this display
 <p/></div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/freedesktop/wayland/client/Display.html#disconnect--">disconnect</a></span>()</code>
<div class="block">Close a connection to a Wayland display
 <p/>
 Close the connection to the display and free all resources associated
 with it.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/freedesktop/wayland/client/Display.html#dispatch--">dispatch</a></span>()</code>
<div class="block">Process incoming events
 <p/>
 Dispatch the display's main event queue.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/freedesktop/wayland/client/Display.html#dispatchPending--">dispatchPending</a></span>()</code>
<div class="block">Dispatch main queue events without reading from the display fd
 <p/>
 This function dispatches events on the main event queue.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/freedesktop/wayland/client/Display.html#dispatchQueue-org.freedesktop.wayland.client.EventQueue-">dispatchQueue</a></span>(<a href="../../../../org/freedesktop/wayland/client/EventQueue.html" title="class in org.freedesktop.wayland.client">EventQueue</a>&nbsp;queue)</code>
<div class="block">Dispatch events in an event queue
 <p/>
 Dispatch all incoming events for objects assigned to the given
 event queue.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/freedesktop/wayland/client/Display.html#dispatchQueuePending-org.freedesktop.wayland.client.EventQueue-">dispatchQueuePending</a></span>(<a href="../../../../org/freedesktop/wayland/client/EventQueue.html" title="class in org.freedesktop.wayland.client">EventQueue</a>&nbsp;queue)</code>
<div class="block">Dispatch pending events in an event queue
 <p/>
 Dispatch all incoming events for objects assigned to the given
 event queue.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/freedesktop/wayland/client/Display.html#flush--">flush</a></span>()</code>
<div class="block">Send all buffered requests on the display to the server
 <p/>
 Send all buffered data on the client side to the server.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/freedesktop/wayland/client/Display.html#getError--">getError</a></span>()</code>
<div class="block">Retrieve the last error that occurred on a display
 <p/>
 Return the last error that occurred on the display.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/freedesktop/wayland/client/Display.html#getFD--">getFD</a></span>()</code>
<div class="block">Get a display context's file descriptor
 <p/>
 Return the file descriptor associated with a display so it can be
 integrated into the client's main loop.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/freedesktop/wayland/client/Display.html#prepareRead--">prepareRead</a></span>()</code>
<div class="block">Prepare to read events after polling file descriptor
 <p/>
 This function must be called before reading from the file
 descriptor using <a href="../../../../org/freedesktop/wayland/client/Display.html#readEvents--"><code>readEvents()</code></a>.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/freedesktop/wayland/client/Display.html#prepareReadQueue-org.freedesktop.wayland.client.EventQueue-">prepareReadQueue</a></span>(<a href="../../../../org/freedesktop/wayland/client/EventQueue.html" title="class in org.freedesktop.wayland.client">EventQueue</a>&nbsp;queue)</code>&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/freedesktop/wayland/client/Display.html#readEvents--">readEvents</a></span>()</code>
<div class="block">Read events from display file descriptor
 <p/>
 This will read events from the file descriptor for the display.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/freedesktop/wayland/client/Display.html#roundtrip--">roundtrip</a></span>()</code>
<div class="block">Block until all pending request are processed by the server
 <p/>
 Blocks until the server process all currently issued requests and
 sends out pending events on all event queues.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.freedesktop.wayland.client.Proxy">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.freedesktop.wayland.client.<a href="../../../../org/freedesktop/wayland/client/Proxy.html" title="class in org.freedesktop.wayland.client">Proxy</a></h3>
<code><a href="../../../../org/freedesktop/wayland/client/Proxy.html#destroy--">destroy</a>, <a href="../../../../org/freedesktop/wayland/client/Proxy.html#equals-java.lang.Object-">equals</a>, <a href="../../../../org/freedesktop/wayland/client/Proxy.html#finalize--">finalize</a>, <a href="../../../../org/freedesktop/wayland/client/Proxy.html#findMatchingConstructor-java.lang.Class-java.lang.Class-java.lang.Class-java.lang.Class-">findMatchingConstructor</a>, <a href="../../../../org/freedesktop/wayland/client/Proxy.html#getId--">getId</a>, <a href="../../../../org/freedesktop/wayland/client/Proxy.html#getImplementation--">getImplementation</a>, <a href="../../../../org/freedesktop/wayland/client/Proxy.html#getNative--">getNative</a>, <a href="../../../../org/freedesktop/wayland/client/Proxy.html#getVersion--">getVersion</a>, <a href="../../../../org/freedesktop/wayland/client/Proxy.html#hashCode--">hashCode</a>, <a href="../../../../org/freedesktop/wayland/client/Proxy.html#isValid--">isValid</a>, <a href="../../../../org/freedesktop/wayland/client/Proxy.html#marshal-int-">marshal</a>, <a href="../../../../org/freedesktop/wayland/client/Proxy.html#marshal-int-org.freedesktop.wayland.util.Arguments-">marshal</a>, <a href="../../../../org/freedesktop/wayland/client/Proxy.html#marshal-int-com.sun.jna.Pointer-">marshal</a>, <a href="../../../../org/freedesktop/wayland/client/Proxy.html#marshalConstructor-int-J-int-java.lang.Class-org.freedesktop.wayland.util.Arguments-">marshalConstructor</a>, <a href="../../../../org/freedesktop/wayland/client/Proxy.html#marshalConstructor-int-J-int-java.lang.Class-com.sun.jna.Pointer-">marshalConstructor</a>, <a href="../../../../org/freedesktop/wayland/client/Proxy.html#marshalProxy-com.sun.jna.Pointer-J-int-java.lang.Class-">marshalProxy</a>, <a href="../../../../org/freedesktop/wayland/client/Proxy.html#setQueue-org.freedesktop.wayland.client.EventQueue-">setQueue</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, getClass, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Display-com.sun.jna.Pointer-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Display</h4>
<pre>protected&nbsp;Display(com.sun.jna.Pointer&nbsp;wlDisplay)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="disconnect--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disconnect</h4>
<pre>public&nbsp;void&nbsp;disconnect()</pre>
<div class="block">Close a connection to a Wayland display
 <p/>
 Close the connection to the display and free all resources associated
 with it.</div>
</li>
</ul>
<a name="getFD--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFD</h4>
<pre>public&nbsp;int&nbsp;getFD()</pre>
<div class="block">Get a display context's file descriptor
 <p/>
 Return the file descriptor associated with a display so it can be
 integrated into the client's main loop.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Display object file descriptor</dd>
</dl>
</li>
</ul>
<a name="dispatch--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dispatch</h4>
<pre>public&nbsp;int&nbsp;dispatch()</pre>
<div class="block">Process incoming events
 <p/>
 Dispatch the display's main event queue.
 <p/>
 If the main event queue is empty, this function blocks until there are
 events to be read from the display fd. Events are read and queued on
 the appropriate event queues. Finally, events on the main event queue
 are dispatched.
 <p/>
 It is not possible to check if there are events on the main queue
 or not. For dispatching main queue events without blocking, see <a href="../../../../org/freedesktop/wayland/client/Display.html#dispatchPending--"><code>dispatchPending()</code></a>.
 <p/>
 Calling this will release the display file descriptor if this
 thread acquired it using wl_display_acquire_fd().</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The number of dispatched events on success or -1 on failure</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../org/freedesktop/wayland/client/Display.html#dispatchPending--"><code>dispatchPending()</code></a>, 
<a href="../../../../org/freedesktop/wayland/client/Display.html#dispatchQueue-org.freedesktop.wayland.client.EventQueue-"><code>dispatchQueue(EventQueue)</code></a></dd>
</dl>
</li>
</ul>
<a name="dispatchPending--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dispatchPending</h4>
<pre>public&nbsp;int&nbsp;dispatchPending()</pre>
<div class="block">Dispatch main queue events without reading from the display fd
 <p/>
 This function dispatches events on the main event queue. It does not
 attempt to read the display fd and simply returns zero if the main
 queue is empty, i.e., it doesn't block.
 <p/>
 This is necessary when a client's main loop wakes up on some fd other
 than the display fd (network socket, timer fd, etc) and calls
 <a href="../../../../org/freedesktop/wayland/client/Display.html#dispatchQueue-org.freedesktop.wayland.client.EventQueue-"><code>dispatchQueue(EventQueue)</code></a> from that callback. This may queue up
 events in the main queue while reading all data from the display fd.
 When the main thread returns to the main loop to block, the display fd
 no longer has data, causing a call to <code>poll(2)</code> (or similar
 functions) to block indefinitely, even though there are events ready
 to dispatch.
 <p/>
 To proper integrate the wayland display fd into a main loop, the
 client should always call <code>dispatchPending()</code> and then
 <a href="../../../../org/freedesktop/wayland/client/Display.html#flush--"><code>flush()</code></a> prior to going back to sleep. At that point,
 the fd typically doesn't have data so attempting I/O could block, but
 events queued up on the main queue should be dispatched.
 <p/>
 A real-world example is a main loop that wakes up on a timerfd (or a
 sound card fd becoming writable, for example in a video player), which
 then triggers GL rendering and eventually eglSwapBuffers().
 eglSwapBuffers() may call <a href="../../../../org/freedesktop/wayland/client/Display.html#dispatchQueue-org.freedesktop.wayland.client.EventQueue-"><code>dispatchQueue(EventQueue)</code></a> if it didn't
 receive the frame event for the previous frame, and as such queue
 events in the main queue.
 <p/>
 Calling this makes the current thread the main one.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The number of dispatched events or -1 on failure</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../org/freedesktop/wayland/client/Display.html#dispatch--"><code>dispatch()</code></a>, 
<a href="../../../../org/freedesktop/wayland/client/Display.html#dispatchQueue-org.freedesktop.wayland.client.EventQueue-"><code>dispatchQueue(EventQueue)</code></a>, 
<a href="../../../../org/freedesktop/wayland/client/Display.html#flush--"><code>flush()</code></a></dd>
</dl>
</li>
</ul>
<a name="dispatchQueue-org.freedesktop.wayland.client.EventQueue-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dispatchQueue</h4>
<pre>public&nbsp;int&nbsp;dispatchQueue(<a href="../../../../org/freedesktop/wayland/client/EventQueue.html" title="class in org.freedesktop.wayland.client">EventQueue</a>&nbsp;queue)</pre>
<div class="block">Dispatch events in an event queue
 <p/>
 Dispatch all incoming events for objects assigned to the given
 event queue. On failure -1 is returned and errno set appropriately.
 <p/>
 This function blocks if there are no events to dispatch. If calling from
 the main thread, it will block reading data from the display fd. For other
 threads this will block until the main thread queues events on the queue
 passed as argument.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>queue</code> - The event queue to dispatch</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The number of dispatched events on success or -1 on failure</dd>
</dl>
</li>
</ul>
<a name="dispatchQueuePending-org.freedesktop.wayland.client.EventQueue-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dispatchQueuePending</h4>
<pre>public&nbsp;int&nbsp;dispatchQueuePending(<a href="../../../../org/freedesktop/wayland/client/EventQueue.html" title="class in org.freedesktop.wayland.client">EventQueue</a>&nbsp;queue)</pre>
<div class="block">Dispatch pending events in an event queue
 <p/>
 Dispatch all incoming events for objects assigned to the given
 event queue. On failure -1 is returned and errno set appropriately.
 If there are no events queued, this function returns immediately.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>queue</code> - The event queue to dispatch</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The number of dispatched events on success or -1 on failure</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.0.2</dd>
</dl>
</li>
</ul>
<a name="flush--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flush</h4>
<pre>public&nbsp;int&nbsp;flush()</pre>
<div class="block">Send all buffered requests on the display to the server
 <p/>
 Send all buffered data on the client side to the server. Clients
 should call this function before blocking. On success, the number
 of bytes sent to the server is returned. On failure, this
 function returns -1 and errno is set appropriately.
 <p/>
 flush() never blocks.  It will write as much data as
 possible, but if all data could not be written, errno will be set
 to EAGAIN and -1 returned.  In that case, use poll on the display
 file descriptor to wait for it to become writable again.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The number of bytes sent on success or -1 on failure</dd>
</dl>
</li>
</ul>
<a name="roundtrip--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>roundtrip</h4>
<pre>public&nbsp;int&nbsp;roundtrip()</pre>
<div class="block">Block until all pending request are processed by the server
 <p/>
 Blocks until the server process all currently issued requests and
 sends out pending events on all event queues.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The number of dispatched events on success or -1 on failure</dd>
</dl>
</li>
</ul>
<a name="createQueue--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createQueue</h4>
<pre>public&nbsp;<a href="../../../../org/freedesktop/wayland/client/EventQueue.html" title="class in org.freedesktop.wayland.client">EventQueue</a>&nbsp;createQueue()</pre>
<div class="block">Create a new event queue for this display
 <p/></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A new event queue associated with this display or NULL on
 failure.</dd>
</dl>
</li>
</ul>
<a name="getError--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getError</h4>
<pre>public&nbsp;int&nbsp;getError()</pre>
<div class="block">Retrieve the last error that occurred on a display
 <p/>
 Return the last error that occurred on the display. This may be an error sent
 by the server or caused by the local client.
 <p/>
 Errors are <b>fatal</b>. If this function returns non-zero the display
 can no longer be used.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The last error that occurred on display or 0 if no error occurred</dd>
</dl>
</li>
</ul>
<a name="prepareReadQueue-org.freedesktop.wayland.client.EventQueue-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepareReadQueue</h4>
<pre>public&nbsp;int&nbsp;prepareReadQueue(<a href="../../../../org/freedesktop/wayland/client/EventQueue.html" title="class in org.freedesktop.wayland.client">EventQueue</a>&nbsp;queue)</pre>
</li>
</ul>
<a name="prepareRead--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepareRead</h4>
<pre>public&nbsp;int&nbsp;prepareRead()</pre>
<div class="block">Prepare to read events after polling file descriptor
 <p/>
 This function must be called before reading from the file
 descriptor using <a href="../../../../org/freedesktop/wayland/client/Display.html#readEvents--"><code>readEvents()</code></a>.  Calling
 <code>prepareRead()</code> announces the calling threads intention
 to read and ensures that until the thread is ready to read and
 calls <a href="../../../../org/freedesktop/wayland/client/Display.html#readEvents--"><code>readEvents()</code></a>, no other thread will read from the
 file descriptor.  This only succeeds if the event queue is empty
 though, and if there are undispatched events in the queue, -1 is
 returned and errno set to EAGAIN.
 <p/>
 If a thread successfully calls <code>prepareRead()</code>, it must
 either call <a href="../../../../org/freedesktop/wayland/client/Display.html#readEvents--"><code>readEvents()</code></a> when it's ready or cancel the
 read intention by calling <a href="../../../../org/freedesktop/wayland/client/Display.html#cancelRead--"><code>cancelRead()</code></a>.
 <p/>
 Use this function before polling on the display fd or to integrate
 the fd into a toolkit event loop in a race-free way.  Typically, a
 toolkit will call <a href="../../../../org/freedesktop/wayland/client/Display.html#dispatchPending--"><code>dispatchPending()</code></a> before sleeping, to
 make sure it doesn't block with unhandled events.  Upon waking up,
 it will assume the file descriptor is readable and read events from
 the fd by calling <a href="../../../../org/freedesktop/wayland/client/Display.html#dispatch--"><code>dispatch()</code></a>.  Simplified, we have:
 <p/>
 <pre>
   <code>

   display.dispatchPending();
   display.flush();
   poll(fds, nfds, -1);
   display.dispatch();
   </code>
 </pre>
 <p/>
 There are two races here: first, before blocking in poll(), the fd
 could become readable and another thread reads the events.  Some of
 these events may be for the main queue and the other thread will
 queue them there and then the main thread will go to sleep in
 poll().  This will stall the application, which could be waiting
 for a event to kick of the next animation frame, for example.
 <p/>
 The other race is immediately after poll(), where another thread
 could preempt and read events before the main thread calls
 <a href="../../../../org/freedesktop/wayland/client/Display.html#dispatch--"><code>dispatch()</code></a>.  This call now blocks and starves the other
 fds in the event loop.
 <p/>
 A correct sequence would be:
 <p/>
 <pre>
   <code>
   while (display.prepareRead() != 0)
           display.dispatch_Pending();
   display.flush();
   poll(fds, nfds, -1);
   display.readEvents();
   display.dispatchPending();
   </code>
 </pre>
 <p/>
 Here we call <code>prepareRead()</code>, which ensures that between
 returning from that call and eventually calling
 <a href="../../../../org/freedesktop/wayland/client/Display.html#readEvents--"><code>readEvents()</code></a>, no other thread will read from the fd and
 queue events in our queue.  If the call to
 <code>prepareRead()</code> fails, we dispatch the pending events and
 try again until we're successful.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>0 on success or -1 if event queue was not empty</dd>
</dl>
</li>
</ul>
<a name="cancelRead--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cancelRead</h4>
<pre>public&nbsp;void&nbsp;cancelRead()</pre>
<div class="block">Release exclusive access to display file descriptor
 <p/>
 This releases the exclusive access.  Useful for canceling the lock
 when a timed out poll returns fd not readable and we're not going
 to read from the fd anytime soon.</div>
</li>
</ul>
<a name="readEvents--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>readEvents</h4>
<pre>public&nbsp;int&nbsp;readEvents()</pre>
<div class="block">Read events from display file descriptor
 <p/>
 This will read events from the file descriptor for the display.
 This function does not dispatch events, it only reads and queues
 events into their corresponding event queues.  If no data is
 avilable on the file descriptor, <code>readEvents()</code> returns
 immediately.  To dispatch events that may have been queued, call
 <a href="../../../../org/freedesktop/wayland/client/Display.html#dispatchPending--"><code>dispatchPending()</code></a> or
 <a href="../../../../org/freedesktop/wayland/client/Display.html#dispatchQueuePending-org.freedesktop.wayland.client.EventQueue-"><code>dispatchQueuePending(EventQueue)</code></a>.
 <p/>
 Before calling this function, <a href="../../../../org/freedesktop/wayland/client/Display.html#prepareRead--"><code>prepareRead()</code></a> must be
 called first.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>0 on success or -1 on error.  In case of error errno will
 be set accordingly</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../org/freedesktop/wayland/client/EventQueue.html" title="class in org.freedesktop.wayland.client"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/freedesktop/wayland/client/Display.html" target="_top">Frames</a></li>
<li><a href="Display.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
